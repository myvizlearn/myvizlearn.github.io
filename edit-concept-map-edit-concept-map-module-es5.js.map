{"version":3,"sources":["./src/app/edit-concept-map/edit-concept-map.page.html","./src/app/edit-concept-map/edit-concept-map.module.ts","./src/app/edit-concept-map/edit-concept-map.page.scss","./src/app/edit-concept-map/edit-concept-map.page.ts"],"names":[],"mappings":"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","file":"edit-concept-map-edit-concept-map-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-button></ion-menu-button>\\n      </ion-buttons>\\n  \\n      <ion-title>\\n          Edit Concept Map\\n      </ion-title>\\n      \\n    </ion-toolbar>\\n    \\n  </ion-header>\\n\\n<ion-content>\\n    \\n     <cm-concept-map></cm-concept-map>\\n</ion-content>\\n\\n<ion-footer>\\n    <ion-grid style=\\\"background-color: gray; height: 10%;\\\">\\n        <ion-row >\\n            <ion-col>\\n                <ion-button>\\n                  <ion-icon slot=\\\"icon-only\\\" name='Open'></ion-icon>Select\\n                </ion-button>\\n              </ion-col> \\n          <ion-col>\\n            <ion-button (click)=\\\"loadLocal()\\\"> \\n              <ion-icon slot=\\\"icon-only\\\" name='download'></ion-icon>Load Local File\\n            </ion-button>\\n          </ion-col>\\n          <ion-col>\\n              <ion-button >\\n                <ion-icon slot=\\\"icon-only\\\" name='remove-circle-outline'></ion-icon>Clear\\n              </ion-button>\\n            </ion-col>\\n           \\n        </ion-row>\\n        </ion-grid>\\n</ion-footer>\\n\"","import { ConceptMapModule } from './../create-concept-map/conceptmap/conceptmap.module';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EditConceptMapPage } from './edit-concept-map.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EditConceptMapPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConceptMapModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [EditConceptMapPage]\n})\nexport class EditConceptMapPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2VkaXQtY29uY2VwdC1tYXAvZWRpdC1jb25jZXB0LW1hcC5wYWdlLnNjc3MifQ== */\"","import { AngularFirestore } from '@angular/fire/firestore';\nimport { Component, OnInit, AfterViewInit, ElementRef, ViewChild} from '@angular/core';\nimport { ConceptMapComponent } from '../create-concept-map/conceptmap/conceptmap.component';\n\n@Component({\n  selector: 'app-edit-concept-map',\n  templateUrl: './edit-concept-map.page.html',\n  styleUrls: ['./edit-concept-map.page.scss'],\n})\nexport class EditConceptMapPage implements AfterViewInit  {\n\n  // @ViewChild('graphContainer',  {static: false}) graphContainer: ElementRef;\n  @ViewChild(ConceptMapComponent, { static: true }) cmap: ConceptMapComponent;\n\n  importTool = {\n    // todo - refactor this\n    _file: undefined,\n    visible: false,\n    chooseFile: event => {\n      if (event.target.files[0]) {\n        const reader = new FileReader();\n        reader.onloadend = e => {\n          this.importTool._file = reader.result;\n        };\n        reader.readAsText(event.target.files[0]);\n      } else {\n        this.importTool._file = undefined;\n      }\n    },\n    loadFile: () => {\n      try {\n        this.cmap.import('{concepts:[],propositions:[]}');\n        this.importTool.visible = false;\n        this.importTool._file = undefined;\n      } catch (err) {\n        // catch error\n      }\n    },\n    disabled: () => !this.importTool._file\n  };\n\n  constructor(\n    private _angularFireStore: AngularFirestore,\n  ) {\n\n  }\n  ngAfterViewInit() {\n    // const graph = new mxGraph(this.graphContainer.nativeElement);\n\n    // try {\n    //   const parent = graph.getDefaultParent();\n    //   graph.getModel().beginUpdate();\n\n    //   const vertex1 = graph.insertVertex(parent, '1', 'Vertex 1', 0, 0, 200, 80);\n    //   const vertex2 = graph.insertVertex(parent, '2', 'Vertex 2', 0, 0, 200, 80);\n\n    //   graph.insertEdge(parent, 'none', 'none2', vertex1, vertex2);\n    // } finally {\n    //   graph.getModel().endUpdate();\n    //   new mxHierarchicalLayout(graph).execute(graph.getDefaultParent());\n  //   }\n  }\n\n  loadLocal() {\n    const db = this._angularFireStore\n      .collection('ConceptMaps')\n      .doc('Plants');\n\n    db.ref.get()\n      .then((doc) => {\n        console.log('ref get', doc.data(), doc);\n        console.log(JSON.stringify(doc.data()));\n        this.cmap.import(JSON.stringify(doc.data()));\n      });\n    // db.valueChanges().subscribe ( res => console.log('res value changes', res));\n    // db.snapshotChanges().subscribe ( res => {\n    //   console.log('res snapshot', res);\n    //  });\n\n    //   .get()\n    //   .then(() => {\n    //     const toast = this._toastController.create({\n    //       message: 'Concept Map save successfully!',\n    //       duration: 2000,\n    //       position: 'top'\n    //     });\n    //     toast.then(toastMessage => {\n    //       toastMessage.present();\n    //     });\n    //   })\n    //   .catch(err => {\n    //     console.log('Error' + err);\n    //   });\n    // this.importTool.visible = true;\n    // const filedata = new Blob ('{concepts:[{text:Test,x:263,y:227,id:e7dab002}],propositions:[]}');\n    // try {\n    // this.cmap.import('\"{\"concepts\":[{\"text\":\"Test\",\"x\":263,\"y\":227,\"id\":\"e7dab002\"}],\"propositions\":[]}\"');\n    // } catch (e) {\n    //   console.log('error', e);\n    // }\n  }\n\n}\n"],"sourceRoot":""}